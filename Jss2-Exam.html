<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daughters of Divine Love Abakpa, Enugu.<br>2025/2026 Academic Session Batch C Entrance Examination</title>
  <style>
    body { 
      font-family: 'Segoe UI', sans-serif; 
      background: #100669; 
      background-image: url(admissionposter.jpg);

      margin: 0; 
      padding: 0; 
      
    }
    .container { 
      max-width: 800px; 
      margin: auto; 
      background: #190466; 
      padding: 20px; 
      border-radius: 10px; 
      margin-top: 30px; 
      box-shadow: 0 0 10px rgba(148, 65, 65, 0.1);
      position: relative;

    }
    header { 
      text-align: center; 
      background: #3f51b5; 
      color: white; 
      padding: 20px; 
    }
    header h1 { 
      margin: 5px 0; 
      font-size: 20px; 
    }
    .question-container {
      margin-bottom: 20px;
      position: relative;
    }
    .question { 
      margin-bottom: 20px; 
    }
    .options label { 
      display: block; 
      margin-bottom: 5px; 
      padding: 8px;
      border-radius: 4px;
    }
    .options label:hover {
      background-color: #f0f0f0;
    }
    #timer { 
      font-weight: bold; 
      color: red; 
      text-align: right; 
      position: fixed;
      top: 10px;
      right: 10px;
      background: white;
      padding: 5px 10px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
      z-index: 1000;
    }
    #webcam-container {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 150px;
      height: 100px;
      z-index: 1000;
      border: 2px solid #3f51b5;
      border-radius: 5px;
      overflow: hidden;
    }
    #webcam {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .hidden { 
      display: none; 
    }
    button { 
      padding: 10px 20px; 
      background: #3f51b5; 
      color: white; 
      border: none; 
      border-radius: 5px; 
      cursor: pointer; 
      margin-top: 15px; 
      font-size: 16px;
    }
    button:disabled { 
      background: gray; 
    }
    .result { 
      background: #e3f2fd; 
      padding: 20px; 
      margin-top: 20px; 
      border-left: 4px solid #2196f3; 
    }
    input[type="text"], select { 
      width: 100%; 
      padding: 10px; 
      margin: 10px 0; 
      font-size: 16px;
    }
    .progress-container {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
      font-size: 14px;
      color: #555;
    }
    .question-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .warning-alert {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #ff4444;
      color: white;
      padding: 20px;
      border-radius: 5px;
      z-index: 2000;
      display: none;
      text-align: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    #noise-warning {
      background-color: #ff8800;
    }
    #tab-warning {
      background-color: #ff4444;
    }
    @media (max-width: 768px) {
      .container {
        margin: 10px;
        padding: 15px;
      }
      #webcam-container {
        width: 100px;
        height: 80px;
      }
      #timer {
        font-size: 14px;
      }
      button {
        padding: 8px 16px;
        width: 100%;
        margin: 5px 0;
      }
      .question-nav {
        flex-direction: column;
      }
      .logo {
  width: 100%;
  max-width: 150px;
  height: auto;
  align-items: center;
}
    }
  </style>
</head>
<body>

<header>
    <img src="SCHOOL.jpg" alt="Logo" width="100", style="float:left;">
  <h1 style="font-size: 250%; color: #9ae709;">DAUGHTERS OF DIVINE LOVE JUNIORATE ABAKPA, ENUGU</h1>
  <p style="font-size: 150%;"><b>2025/2026 Academic Session Batch C Entrance Examination</p>
</header>

<div id="webcam-container" class="hidden">
  <video id="webcam" autoplay playsinline></video>
</div>

<div id="timer" class="hidden">Time Left: 1:00:00</div>

<div class="container" id="startScreen">
  <h3 style="color: #e8e7eb; text-align: center;">Student Information</h3>
  <p style="color: #f8f8fa;text-align: center;"><b>Make sure you have read the information carefully before starting the exam</p>
  <input type="text" id="studentName" placeholder="Full Name" required />
  <input type="text" id="studentClass" placeholder="Class Applying Into" required />
  <input type="text" id="studentPhone" placeholder="Phone Number" required />
  <button onclick="startExam()">Start Exam</button>
</div>

<div class="container hidden" id="examScreen">
  <div class="progress-container">
    <div id="progress-count">Question 1 of 70</div>
    <div id="answered-count">Answered: 0/70</div>
  </div>
  <form id="examForm", style="color: #d8e709;">
    <div id="questions-container">
      <!-- Questions will be dynamically inserted here -->
    </div>

    <div class="question-nav">
      <button type="button" id="prevBtn" onclick="navigateQuestion(-1)" disabled>Previous</button>
      <button type="button" id="nextBtn" onclick="navigateQuestion(1)">Next</button>
    </div>

    <button type="submit" id="submitBtn">Submit Exam</button>
  </form>

  <div class="result hidden" id="resultBox"></div>
  <button id="pdf-download" class="hidden" onclick="generatePDF()">Download Result as PDF</button>
</div>

<div class="warning-alert" id="noise-warning">
  <h3>Warning!</h3>
  <p>Excessive noise detected. Please maintain silence during the exam.</p>
  <button onclick="document.getElementById('noise-warning').style.display = 'none'">OK</button>
</div>

<div class="warning-alert" id="tab-warning">
  <h3>Warning!</h3>
  <p>Do not switch tabs or leave this page during the exam!</p>
  <button onclick="document.getElementById('tab-warning').style.display = 'none'">OK</button>
</div>

<!-- Libraries -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAG2INXGOyaxW6cewhM-uiYTvydkGvQRgc",
    authDomain: "ddl-exam-report.firebaseapp.com",
    projectId: "ddl-exam-report",
    storageBucket: "ddl-exam-report.appspot.com",
    messagingSenderId: "1060940461659",
    appId: "1:1060940461659:web:3afc9539da4cd81c3df17e",
    measurementId: "G-3BHGRDYCMH"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const { jsPDF } = window.jspdf;

  // Global variables
  let currentQuestionIndex = 0;
  let questions = [];
  let examResult = {};
  let timerInterval;
  let audioContext;
  let noiseMonitorInterval;
  let warningCount = 0;

  // Sample questions - replace with your actual questions
  
  const sampleQuestions = [
    // English Questions

  {
    id: "q_eng_1",
    subject: "English",
    text: "1. According to the passage, teens craze for fashion can be traced to______",
    options: [
      { value: "A", text: "Mothers" },
      { value: "B", text: "Teachers" },
      { value: "C", text: "Celebrities" },
      { value: "D", text: "Friends" }
    ]
  },
  {
    id: "q_eng_2",
    subject: "English",
    text: "2. The people that bear the burden of expenditure for fashion are _______",
    options: [
      { value: "A", text: "Parents" },
      { value: "B", text: "Boyfriends" },
      { value: "C", text: "Sugar daddies" },
      { value: "D", text: "Youths" }
    ]
  },
  {
    id: "q_eng_3",
    subject: "English",
    text: "3. According to the passage, you lose your_____ when you dress indecently",
    options: [
      { value: "A", text: "Fashion" },
      { value: "B", text: "Dressing" },
      { value: "C", text: "Radicalism" },
      { value: "D", text: "Decency" }
    ]
  },
  {
    id: "q_eng_4",
    subject: "English",
    text: "4. The commonest aspect of indecent dressing is the showing of ____",
    options: [
      { value: "A", text: "Laps and tight" },
      { value: "B", text: "Breast" },
      { value: "C", text: "Tummy" },
      { value: "D", text: "All of the above" }
    ]
  },
  {
    id: "q_eng_5",
    subject: "English",
    text: "5. Celebrities means ___",
    options: [
      { value: "A", text: "Notorious people" },
      { value: "B", text: "Professors" },
      { value: "C", text: "Famous person" },
      { value: "D", text: "Politicians" }
    ]
  },
  {
    id: "q_eng_6",
    subject: "English",
    text: "6. She gave him a bowl ___ soup",
    options: [
      { value: "A", text: "To" },
      { value: "B", text: "Of" },
      { value: "C", text: "On" },
      { value: "D", text: "From" }
    ]
  },
  {
    id: "q_eng_7",
    subject: "English",
    text: "7. The film lasted __ three hours",
    options: [
      { value: "A", text: "In" },
      { value: "B", text: "Upon" },
      { value: "C", text: "For" },
      { value: "D", text: "With" }
    ]
  },
  {
    id: "q_eng_8",
    subject: "English",
    text: "8. The goats ran __ the field",
    options: [
      { value: "A", text: "And" },
      { value: "B", text: "To" },
      { value: "C", text: "From" },
      { value: "D", text: "In" }
    ]
  },
  {
    id: "q_eng_9",
    subject: "English",
    text: "9. The boy whispered his name into my ear (Opposite of 'whispered')",
    options: [
      { value: "A", text: "Spoke" },
      { value: "B", text: "Shouted" },
      { value: "C", text: "Called" },
      { value: "D", text: "Pronounced" },
      { value: "E", text: "Mention" }
    ]
  },
  {
    id: "q_eng_10",
    subject: "English",
    text: "10. Some people say smoking is dangerous (Opposite of 'dangerous')",
    options: [
      { value: "A", text: "Risk" },
      { value: "B", text: "Safe" },
      { value: "C", text: "Comfortable" },
      { value: "D", text: "Interesting" }
    ]
  },
  {
    id: "q_eng_11",
    subject: "English",
    text: "11. Ada is always Late to school (Opposite of 'Late')",
    options: [
      { value: "A", text: "Tardy" },
      { value: "B", text: "Lazy" },
      { value: "C", text: "Punctual" },
      { value: "D", text: "Slow" }
    ]
  },
  {
    id: "q_eng_12",
    subject: "English",
    text: "12. When I came in the fire was burning brightly (Opposite of 'brightly')",
    options: [
      { value: "A", text: "Thinly" },
      { value: "B", text: "Dimly" },
      { value: "C", text: "Stupidly" },
      { value: "D", text: "Tiredly" }
    ]
  },
  {
    id: "q_eng_13",
    subject: "English",
    text: "13. The class is noisy because there are many students in it (Opposite of 'noisy')",
    options: [
      { value: "A", text: "Full" },
      { value: "B", text: "Quiet" },
      { value: "C", text: "Still" },
      { value: "D", text: "Boring" }
    ]
  },
  {
    id: "q_eng_14",
    subject: "English",
    text: "14. My father ______ shoes in the market daily.",
    options: [
      { value: "A", text: "Sold" },
      { value: "B", text: "Sells" },
      { value: "C", text: "Selling" },
      { value: "D", text: "Sellen" }
    ]
  },
  {
    id: "q_eng_15",
    subject: "English",
    text: "15. The priest _____ to church every Sunday.",
    options: [
      { value: "A", text: "Goes" },
      { value: "B", text: "Going" },
      { value: "C", text: "Went" },
      { value: "D", text: "Gone" }
    ]
  },
  {
    id: "q_eng_16",
    subject: "English",
    text: "16. The monitor has _____ the bell",
    options: [
      { value: "A", text: "Rings" },
      { value: "B", text: "Rung" },
      { value: "C", text: "Ring" },
      { value: "D", text: "Rang" }
    ]
  },
  {
    id: "q_eng_17",
    subject: "English",
    text: "17. The boy has _______ the sheep out of the farm.",
    options: [
      { value: "A", text: "Drove" },
      { value: "B", text: "Drive" },
      { value: "C", text: "Driven" },
      { value: "D", text: "Drives" }
    ]
  },
  {
    id: "q_eng_18",
    subject: "English",
    text: "18. Our school ____ the quiz competition.",
    options: [
      { value: "A", text: "Wins" },
      { value: "B", text: "Win" },
      { value: "C", text: "Winning" },
      { value: "D", text: "Won" }
    ]
  },
  {
    id: "q_eng_19",
    subject: "English",
    text: "19. She is sitting on the Chair. (Identify part of speech of 'on')",
    options: [
      { value: "A", text: "Verb" },
      { value: "B", text: "Pronoun" },
      { value: "C", text: "Adverb" },
      { value: "D", text: "Preposition" }
    ]
  },
  {
    id: "q_eng_20",
    subject: "English",
    text: "20. The boy hid himself. (Identify part of speech of 'himself')",
    options: [
      { value: "A", text: "Pronoun" },
      { value: "B", text: "Verb" },
      { value: "C", text: "Conjunction" },
      { value: "D", text: "Noun" }
    ]
  },
  {
    id: "q_eng_21",
    subject: "English",
    text: "21. Neither Jude nor Jane came to school. (Identify part of speech of 'nor')",
    options: [
      { value: "A", text: "Adjective" },
      { value: "B", text: "Adverb" },
      { value: "C", text: "Conjunction" },
      { value: "D", text: "Noun" }
    ]
  },
  {
    id: "q_eng_22",
    subject: "English",
    text: "22. The students were sleeping because the teacher’s lesson was boring. (Nearest in meaning to 'boring')",
    options: [
      { value: "A", text: "Uninteresting" },
      { value: "B", text: "Humorous" },
      { value: "C", text: "Funny" },
      { value: "D", text: "Serious" }
    ]
  },
  {
    id: "q_eng_23",
    subject: "English",
    text: "23. The lady showed her only son true affection. (Nearest in meaning to 'affection')",
    options: [
      { value: "A", text: "Hatred" },
      { value: "B", text: "Pity" },
      { value: "C", text: "Help" },
      { value: "D", text: "Love" }
    ]
  },
  {
    id: "q_eng_24",
    subject: "English",
    text: "24. /a/ is heard in which of these words?",
    options: [
      { value: "A", text: "Far" },
      { value: "B", text: "Hot" },
      { value: "C", text: "Pot" },
      { value: "D", text: "Fast" }
    ]
  },
  {
    id: "q_eng_25",
    subject: "English",
    text: "25. /i:/ is heard in which of these words?",
    options: [
      { value: "A", text: "Fit" },
      { value: "B", text: "Feet" },
      { value: "C", text: "Sight" },
      { value: "D", text: "Fight" }
    ]
  },

    // Add more questions here...
    // Math Questions
    
  {
    id: "q_math_1",
    subject: "Mathematics",
    text: "1. What is the place value of 7 in the number 2376400?",
    options: [
      { value: "A", text: "70" },
      { value: "B", text: "700" },
      { value: "C", text: "7000" },
      { value: "D", text: "70,000" }
    ]
  },
  {
    id: "q_math_2",
    subject: "Mathematics",
    text: "2. Find the sum of 3.13, 4.171, 1.12, 2.02 and 6.069",
    options: [
      { value: "A", text: "16.01" },
      { value: "B", text: "16.15" },
      { value: "C", text: "16.51" },
      { value: "D", text: "16.50" }
    ]
  },
  {
    id: "q_math_3",
    subject: "Mathematics",
    text: "3. If 25 bags of cement cost N65,000.00, find the cost of 18 bags",
    options: [
      { value: "A", text: "N2,600.00" },
      { value: "B", text: "N31,500" },
      { value: "C", text: "N46,800" },
      { value: "D", text: "N53,700" }
    ]
  },
  {
    id: "q_math_4",
    subject: "Mathematics",
    text: "4. Express 112 as a product of its prime",
    options: [
      { value: "A", text: "2⁴ × 7" },
      { value: "B", text: "2² × 3 × 7" },
      { value: "C", text: "2³ × 3 × 7" },
      { value: "D", text: "2² × 3 × 7" }
    ]
  },
  {
    id: "q_math_5",
    subject: "Mathematics",
    text: "5. Find the simple interest on N70,000.00 for 7½ years at 3% per annum",
    options: [
      { value: "A", text: "N20,250.00" },
      { value: "B", text: "N15,750.00" },
      { value: "C", text: "N15,916.00" },
      { value: "D", text: "N45,500.00" }
    ]
  },
  {
    id: "q_math_6",
    subject: "Mathematics",
    text: "6. Divide the L.C.M of 9, 12 and 18 by its H.C.F",
    options: [
      { value: "A", text: "6" },
      { value: "B", text: "12" },
      { value: "C", text: "8" },
      { value: "D", text: "9" }
    ]
  },
  {
    id: "q_math_7",
    subject: "Mathematics",
    text: "7. Calculate the area of the trapezium below",
    options: [
      { value: "A", text: "75 cm²" },
      { value: "B", text: "62 cm²" },
      { value: "C", text: "43 cm²" },
      { value: "D", text: "25 cm²" }
    ]
  },
  {
    id: "q_math_8",
    subject: "Mathematics",
    text: "8. A circular presentation of data is known as",
    options: [
      { value: "A", text: "Bar chart" },
      { value: "B", text: "Histogram" },
      { value: "C", text: "Pie chart" },
      { value: "D", text: "Pictogram" }
    ]
  },
  {
    id: "q_math_9",
    subject: "Mathematics",
    text: "9. Evaluate x - y when x = 4 and y = -7",
    options: [
      { value: "A", text: "11" },
      { value: "B", text: "-11" },
      { value: "C", text: "3" },
      { value: "D", text: "-3" }
    ]
  },
  {
    id: "q_math_10",
    subject: "Mathematics",
    text: "10. Find the value of x in 2x - 3 = 7",
    options: [
      { value: "A", text: "5" },
      { value: "B", text: "2" },
      { value: "C", text: "10" },
      { value: "D", text: "20" }
    ]
  },
  {
    id: "q_math_11",
    subject: "Mathematics",
    text: "11. The place value of 8 in 24804 is",
    options: [
      { value: "A", text: "Thousand" },
      { value: "B", text: "Million" },
      { value: "C", text: "Tens of thousand" },
      { value: "D", text: "Hundred" }
    ]
  },
  {
    id: "q_math_12",
    subject: "Mathematics",
    text: "12. Arrange -12, 6, 8, -30 and 4 in ascending order",
    options: [
      { value: "A", text: "8, 6, 4, -30" },
      { value: "B", text: "-30, -12, 4, 6, 8" },
      { value: "C", text: "4, 8, -30, -12, 6" },
      { value: "D", text: "-12, -30, 8, 6, 4" }
    ]
  },
  {
    id: "q_math_13",
    subject: "Mathematics",
    text: "13. Round off 0.004365 to 4 decimal places",
    options: [
      { value: "A", text: "0.0043" },
      { value: "B", text: "0.0044" },
      { value: "C", text: "0.00437" },
      { value: "D", text: "0.0040" }
    ]
  },
  {
    id: "q_math_14",
    subject: "Mathematics",
    text: "14. P + 23 = 50, what is P?",
    options: [
      { value: "A", text: "27" },
      { value: "B", text: "72" },
      { value: "C", text: "73" },
      { value: "D", text: "37" }
    ]
  },
  {
    id: "q_math_15",
    subject: "Mathematics",
    text: "15. Chika and Shehu were given 120 oranges to share in the ratio 3:5. How many oranges was Shehu's share?",
    options: [
      { value: "A", text: "45 oranges" },
      { value: "B", text: "75 oranges" },
      { value: "C", text: "35 oranges" },
      { value: "D", text: "55 oranges" }
    ]
  },
  {
    id: "q_math_16",
    subject: "Mathematics",
    text: "16. A child scored 30 out of 60 marks. Express his mark as a percentage.",
    options: [
      { value: "A", text: "60%" },
      { value: "B", text: "50%" },
      { value: "C", text: "30%" },
      { value: "D", text: "40%" }
    ]
  },
  {
    id: "q_math_17",
    subject: "Mathematics",
    text: "17. Divide N60 between Emeka and Okey. Emeka has N10 more than Okey. How much has Emeka?",
    options: [
      { value: "A", text: "N35" },
      { value: "B", text: "N25" },
      { value: "C", text: "N40" },
      { value: "D", text: "N30" }
    ]
  },
  {
    id: "q_math_18",
    subject: "Mathematics",
    text: "18. Find the simple interest paid on N500 at 5% per annum for 3 years.",
    options: [
      { value: "A", text: "N75" },
      { value: "B", text: "N25" },
      { value: "C", text: "N15" },
      { value: "D", text: "N45" }
    ]
  },
  {
    id: "q_math_19",
    subject: "Mathematics",
    text: "19. Nkechi and John shared 70 mangoes in the ratio of 3:2. What is John's share?",
    options: [
      { value: "A", text: "30 mangoes" },
      { value: "B", text: "20 mangoes" },
      { value: "C", text: "35 mangoes" },
      { value: "D", text: "25 mangoes" }
    ]
  },
  {
    id: "q_math_20",
    subject: "Mathematics",
    text: "20. In a town of 42,580 people, 11,502 are men, 17,321 are women. How many children live in the town?",
    options: [
      { value: "A", text: "13,757" },
      { value: "B", text: "13,757" },
      { value: "C", text: "13,577" },
      { value: "D", text: "13,727" }
    ]
  },
  {
    id: "q_math_21",
    subject: "Mathematics",
    text: "21. How many days are there in 8 weeks?",
    options: [
      { value: "A", text: "20 days" },
      { value: "B", text: "56 days" },
      { value: "C", text: "48 days" },
      { value: "D", text: "60 days" }
    ]
  },
  {
    id: "q_math_22",
    subject: "Mathematics",
    text: "22. Find the mode of these scores: 3, 2, 6, 3, 10, 4",
    options: [
      { value: "A", text: "10" },
      { value: "B", text: "2" },
      { value: "C", text: "6" },
      { value: "D", text: "3" }
    ]
  },
  {
    id: "q_math_23",
    subject: "Mathematics",
    text: "23. A girl buys seven pins for N630. How much would 10 pins cost?",
    options: [
      { value: "A", text: "N900" },
      { value: "B", text: "N90" },
      { value: "C", text: "N9000" },
      { value: "D", text: "N680" }
    ]
  },


    // General Paper Questions
  {
    id: "q_gp_1",
    subject: "General Paper",
    text: "1. The two places where Abraham built altars and worshipped God were at",
    options: [
      { value: "A", text: "Bethel and Hebron" },
      { value: "B", text: "Schechem and Bethel" },
      { value: "C", text: "Dan and Beer-sheba" },
      { value: "D", text: "Dan and Jericho" }
    ]
  },
  {
    id: "q_gp_2",
    subject: "General Paper",
    text: "2. On the fourth day God created ____",
    options: [
      { value: "A", text: "Land, sea and vegetation" },
      { value: "B", text: "Sun, moon and stars" },
      { value: "C", text: "Heaven and earth" },
      { value: "D", text: "Land, animal and man" }
    ]
  },
  {
    id: "q_gp_3",
    subject: "General Paper",
    text: "3. Man became a living being when God",
    options: [
      { value: "A", text: "Created him with the dust of the earth" },
      { value: "B", text: "Gave him dominion over the earth" },
      { value: "C", text: "Created him" },
      { value: "D", text: "Breathed into his nose" }
    ]
  },
  {
    id: "q_gp_4",
    subject: "General Paper",
    text: "4. The first biblical creation story is recorded in the book of",
    options: [
      { value: "A", text: "Genesis" },
      { value: "B", text: "Exodus" },
      { value: "C", text: "Leviticus" },
      { value: "D", text: "Numbers" }
    ]
  },
  {
    id: "q_gp_5",
    subject: "General Paper",
    text: "5. Before creation, the spirit of God was",
    options: [
      { value: "A", text: "Instilled in man" },
      { value: "B", text: "Resting" },
      { value: "C", text: "Hovering over the surface of the deep" },
      { value: "D", text: "Hovering over the angels" }
    ]
  },
  {
    id: "q_gp_6",
    subject: "General Paper",
    text: "6. In the first creation story, God created",
    options: [
      { value: "A", text: "Out of his hand" },
      { value: "B", text: "Out of spoken word" },
      { value: "C", text: "Out of his hand and word" },
      { value: "D", text: "None of the above" }
    ]
  },
  {
    id: "q_gp_7",
    subject: "General Paper",
    text: "7. One of these is created on the 3rd day",
    options: [
      { value: "A", text: "Tree" },
      { value: "B", text: "Bird" },
      { value: "C", text: "Chairs" },
      { value: "D", text: "Sun" }
    ]
  },
  {
    id: "q_gp_8",
    subject: "General Paper",
    text: "8. Which of these is to control other created thing?",
    options: [
      { value: "A", text: "Spirit" },
      { value: "B", text: "Man" },
      { value: "C", text: "Animal" },
      { value: "D", text: "Angels" }
    ]
  },
  {
    id: "q_gp_9",
    subject: "General Paper",
    text: "9. One of the reasons for creating man is for man to",
    options: [
      { value: "A", text: "Go to school" },
      { value: "B", text: "Destroy created things" },
      { value: "C", text: "Subdue the woman" },
      { value: "D", text: "Worship God" }
    ]
  },
  {
    id: "q_gp_10",
    subject: "General Paper",
    text: "10. Marriage is important for",
    options: [
      { value: "A", text: "Divorce" },
      { value: "B", text: "Procreation" },
      { value: "C", text: "Barrenness" },
      { value: "D", text: "Poverty" }
    ]
  },
  {
    id: "q_gp_11",
    subject: "General Paper",
    text: "11. Plants are green in colour due to the presence of",
    options: [
      { value: "A", text: "Cytoplasm" },
      { value: "B", text: "Cell wall" },
      { value: "C", text: "Cellulose" },
      { value: "D", text: "Chlorophyll" }
    ]
  },
  {
    id: "q_gp_12",
    subject: "General Paper",
    text: "12. The ability to respond to changes in the environment is termed",
    options: [
      { value: "A", text: "Irritability" },
      { value: "B", text: "Locomotion" },
      { value: "C", text: "Active Movement" },
      { value: "D", text: "Growth" }
    ]
  },
  {
    id: "q_gp_13",
    subject: "General Paper",
    text: "13. A bacteria known as Salmonella typhi causes",
    options: [
      { value: "A", text: "Diarrhea" },
      { value: "B", text: "Malaria" },
      { value: "C", text: "Cholera" },
      { value: "D", text: "Typhoid fever" }
    ]
  },
  {
    id: "q_gp_14",
    subject: "General Paper",
    text: "14. Heavy and sustained use of some drugs during pregnancy may cause",
    options: [
      { value: "A", text: "Miscarriage" },
      { value: "B", text: "Giving birth to a male child" },
      { value: "C", text: "Giving birth to twins" },
      { value: "D", text: "Giving birth to a male child" }
    ]
  },
  {
    id: "q_gp_15",
    subject: "General Paper",
    text: "15. A period during which physical, emotional and other changes take place in boys and girls is termed",
    options: [
      { value: "A", text: "Childhood" },
      { value: "B", text: "Adulthood" },
      { value: "C", text: "Adolescence" },
      { value: "D", text: "Babyhood" }
    ]
  },
  {
    id: "q_gp_16",
    subject: "General Paper",
    text: "16. Hardwood is obtained from",
    options: [
      { value: "A", text: "Any tree" },
      { value: "B", text: "Narrow Leaf tree" },
      { value: "C", text: "Coniferous tree" },
      { value: "D", text: "Deciduous trees" }
    ]
  },
  {
    id: "q_gp_17",
    subject: "General Paper",
    text: "17. The following are properties of ceramics except",
    options: [
      { value: "A", text: "Brittleness" },
      { value: "B", text: "Elasticity" },
      { value: "C", text: "Corrosion resistance" },
      { value: "D", text: "Insulation" }
    ]
  },
  {
    id: "q_gp_18",
    subject: "General Paper",
    text: "18. Rubber is used in the making of car bumper because of its",
    options: [
      { value: "A", text: "Elastic property" },
      { value: "B", text: "Insulating property" },
      { value: "C", text: "Shock absorbing property" },
      { value: "D", text: "Corrosion resistance property" }
    ]
  },
  {
    id: "q_gp_19",
    subject: "General Paper",
    text: "19. The first stage in the process of processing a tree is ____",
    options: [
      { value: "A", text: "Conversion" },
      { value: "B", text: "Seasoning" },
      { value: "C", text: "Felling the tree" },
      { value: "D", text: "Preservation treatment" }
    ]
  },
  {
    id: "q_gp_20",
    subject: "General Paper",
    text: "20. The raw material for making natural rubber is",
    options: [
      { value: "A", text: "Rubber latex" },
      { value: "B", text: "Rubber yeast" },
      { value: "C", text: "Chemical process" },
      { value: "D", text: "Synthetic rubber" }
    ]
  },
  {
    id: "q_gp_21",
    subject: "General Paper",
    text: "21. Social studies as a school subject was first conceived in",
    options: [
      { value: "A", text: "United State of America" },
      { value: "B", text: "Ghana" },
      { value: "C", text: "Nigeria" },
      { value: "D", text: "China" }
    ]
  },
  {
    id: "q_gp_22",
    subject: "General Paper",
    text: "22. After World War I and II, social studies was identified as a subject that is relevant to the understanding of man and his",
    options: [
      { value: "A", text: "Wife" },
      { value: "B", text: "Spirit" },
      { value: "C", text: "Environment" },
      { value: "D", text: "Creator" }
    ]
  },
  {
    id: "q_gp_23",
    subject: "General Paper",
    text: "23. A kind of value cherished by an individual is distinguished as",
    options: [
      { value: "A", text: "Moral values" },
      { value: "B", text: "Society values" },
      { value: "C", text: "Personal values" },
      { value: "D", text: "Aesthetic values" }
    ]
  },
  {
    id: "q_gp_24",
    subject: "General Paper",
    text: "24. Self-reliance rightly means",
    options: [
      { value: "A", text: "Family-dependent" },
      { value: "B", text: "Society-dependent" },
      { value: "C", text: "Government-dependence" },
      { value: "D", text: "Independence" }
    ]
  },
  {
    id: "q_gp_25",
    subject: "General Paper",
    text: "25. How old was Abraham when Isaac was born?",
    options: [
      { value: "A", text: "70 years" },
      { value: "B", text: "80 years" },
      { value: "C", text: "90 years" },
      { value: "D", text: "100 years" }
    ]
  }
  ];

  // Correct answers - replace with your actual correct answers
  const correctAnswers = {
  q_eng_1: "C",
  q_eng_2: "A",
  q_eng_3: "D",
  q_eng_4: "D",
  q_eng_5: "C",
  q_eng_6: "B",
  q_eng_7: "C",
  q_eng_8: "B",
  q_eng_9: "B",
  q_eng_10: "B",
  q_eng_11: "C",
  q_eng_12: "B",
  q_eng_13: "B",
  q_eng_14: "B",
  q_eng_15: "A",
  q_eng_16: "B",
  q_eng_17: "C",
  q_eng_18: "D",
  q_eng_19: "A",
  q_eng_20: "A",
  q_eng_21: "C",
  q_eng_22: "A",
  q_eng_23: "D",
  q_eng_24: "A",
  q_eng_25: "B",

   q_math_1: "D",
  q_math_2: "C",
  q_math_3: "C",
  q_math_4: "A",
  q_math_5: "A",
  q_math_6: "B",
  q_math_7: "B",
  q_math_8: "A",
  q_math_9: "C",
  q_math_10: "A",
  q_math_11: "A",
  q_math_12: "D",
  q_math_13: "B",
  q_math_14: "B",
  q_math_15: "A",
  q_math_16: "B",
  q_math_17: "B",
  q_math_18: "A",
  q_math_19: "A",
  q_math_20: "B",
  q_math_21: "D",

    q_gp_1: "B",
  q_gp_2: "B",
  q_gp_3: "D",
  q_gp_4: "A",
  q_gp_5: "C",
  q_gp_6: "D",
  q_gp_7: "A",
  q_gp_8: "B",
  q_gp_9: "D",
  q_gp_10: "B",
  q_gp_11: "D",
  q_gp_12: "D",
  q_gp_13: "A",
  q_gp_14: "D",
  q_gp_15: "A",
  q_gp_16: "C",
  q_gp_17: "D",
  q_gp_18: "B",
  q_gp_19: "C",
  q_gp_20: "C",
  q_gp_21: "A",
  q_gp_22: "A",
  q_gp_23: "C",
  q_gp_24: "C",
  q_gp_25: "A"

  };

  // Start exam function
  function startExam() {
    const name = document.getElementById("studentName").value.trim();
    const phone = document.getElementById("studentPhone").value.trim();
    const level = document.getElementById("studentClass").value.trim();
    
    if (!name || !phone || !level) {
      return alert("Please fill all fields");
    }
    
    document.getElementById("startScreen").classList.add("hidden");
    document.getElementById("examScreen").classList.remove("hidden");
    document.getElementById("webcam-container").classList.remove("hidden");
    document.getElementById("timer").classList.remove("hidden");
    
    // Initialize questions
    questions = sampleQuestions;
    renderQuestions();
    updateProgress();
    
    // Start camera
    startCamera();
    
    // Start timer
    startTimer();
    
    // Start noise monitoring
    startNoiseMonitoring();
    
    // Start tab change monitoring
    startTabMonitoring();
  }

  // Render all questions
  function renderQuestions() {
    const container = document.getElementById("questions-container");
    container.innerHTML = "";
    
    questions.forEach((question, index) => {
      const questionDiv = document.createElement("div");
      questionDiv.className = `question-container ${index === 0 ? "" : "hidden"}`;
      questionDiv.id = `question-${index}`;
      
      let optionsHTML = "";
      question.options.forEach(option => {
        optionsHTML += `
          <label>
            <input type="radio" name="${question.id}" value="${option.value}">
            ${option.value}) ${option.text}
          </label>
        `;
      });
      
      questionDiv.innerHTML = `
        <div class="question">
          <h3>${question.text}</h3>
          <div class="options">${optionsHTML}</div>
        </div>
      `;
      
      container.appendChild(questionDiv);
    });
  }

  // Navigate between questions
  function navigateQuestion(direction) {
    // Hide current question
    document.getElementById(`question-${currentQuestionIndex}`).classList.add("hidden");
    
    // Update index
    currentQuestionIndex += direction;
    
    // Show new question
    document.getElementById(`question-${currentQuestionIndex}`).classList.remove("hidden");
    
    // Update navigation buttons
    updateNavigationButtons();
    updateProgress();
  }

  // Update navigation buttons state
  function updateNavigationButtons() {
    document.getElementById("prevBtn").disabled = currentQuestionIndex === 0;
    document.getElementById("nextBtn").disabled = currentQuestionIndex === questions.length - 1;
    
    // Change next button to submit on last question
    if (currentQuestionIndex === questions.length - 1) {
      document.getElementById("nextBtn").style.display = 'none';
      document.getElementById("submitBtn").style.display = 'block';
    } else {
      document.getElementById("nextBtn").style.display = 'block';
      document.getElementById("submitBtn").style.display = 'none';
    }
  }

  // Update progress counters
  function updateProgress() {
    // Update question count
    document.getElementById("progress-count").textContent = 
      `Question ${currentQuestionIndex + 1} of ${questions.length}`;
    
    // Update answered count
    const answered = document.querySelectorAll('input[type="radio"]:checked').length;
    document.getElementById("answered-count").textContent = 
      `Answered: ${answered}/${questions.length}`;
  }

  // Start camera
  function startCamera() {
    navigator.mediaDevices.getUserMedia({ 
      video: { 
        width: { ideal: 320 }, 
        height: { ideal: 240 },
        facingMode: "user" 
      },
      audio: false
    })
    .then(stream => {
      document.getElementById("webcam").srcObject = stream;
      
      // Monitor camera for visibility changes
      const videoTrack = stream.getVideoTracks()[0];
      const settings = videoTrack.getSettings();
      
      // Check periodically if camera is still active
      setInterval(() => {
        if (videoTrack.readyState === 'ended') {
          showWarning("Camera disconnected! Please reconnect your camera.");
        }
      }, 5000);
    })
    .catch(error => {
      console.error("Camera access error:", error);
      alert("Camera access is required for exam monitoring!");
    });
  }

  // Start timer
  function startTimer() {
    let timeLeft = 7200; // 2 hours in seconds
    const timerElement = document.getElementById("timer");
    
    timerInterval = setInterval(() => {
      const hrs = Math.floor(timeLeft / 3600);
      const mins = Math.floor((timeLeft % 3600) / 60);
      const secs = timeLeft % 60;
      
      timerElement.textContent = `Time Left: ${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      
      if (--timeLeft <= 0) {
        clearInterval(timerInterval);
        document.getElementById("examForm").requestSubmit();
        alert("Time's up! Your exam has been automatically submitted.");
      }
    }, 1000);
  }

  // Start noise monitoring
  function startNoiseMonitoring() {
    try {
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      let analyser = audioContext.createAnalyser();
      analyser.fftSize = 256;
      
      navigator.mediaDevices.getUserMedia({ audio: true, video: false })
        .then(stream => {
          let microphone = audioContext.createMediaStreamSource(stream);
          microphone.connect(analyser);
          
          let bufferLength = analyser.frequencyBinCount;
          let dataArray = new Uint8Array(bufferLength);
          let noiseThreshold = 50; // Adjust this based on testing
          let quietFrames = 0;
          
          noiseMonitorInterval = setInterval(() => {
            analyser.getByteFrequencyData(dataArray);
            let total = 0;
            
            for (let i = 0; i < bufferLength; i++) {
              total += dataArray[i];
            }
            
            let average = total / bufferLength;
            
            if (average > noiseThreshold) {
              quietFrames = 0;
              warningCount++;
              
              if (warningCount > 3) {
                showWarning("noise");
              }
            } else {
              quietFrames++;
              if (quietFrames > 10) {
                warningCount = Math.max(0, warningCount - 1);
              }
            }
          }, 200);
        })
        .catch(err => {
          console.log("Audio monitoring not available:", err);
        });
    } catch (e) {
      console.log("AudioContext not supported:", e);
    }
  }

  // Start tab monitoring
  function startTabMonitoring() {
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
        showWarning("tab");
      }
    });
    
    window.addEventListener("blur", () => {
      showWarning("tab");
    });
  }

  // Show warning message
  function showWarning(type) {
    if (type === "noise") {
      document.getElementById("noise-warning").style.display = 'block';
    } else if (type === "tab") {
      document.getElementById("tab-warning").style.display = 'block';
    }
    
    // Log warning to Firebase
    db.collection("exam_warnings").add({
      type: type,
      timestamp: new Date(),
      studentName: document.getElementById("studentName").value,
      studentPhone: document.getElementById("studentPhone").value
    });
  }

  // Form submission
  document.getElementById("examForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    
    // Disable submit button to prevent multiple submissions
    const submitBtn = this.querySelector("button[type='submit']");
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";
    
    try {
      // Get student info
      const name = document.getElementById("studentName").value;
      const phone = document.getElementById("studentPhone").value;
      const level = document.getElementById("studentClass").value;
      
      // Collect all answers
      const answers = {};
      const radioButtons = document.querySelectorAll('input[type="radio"]:checked');
      radioButtons.forEach(radio => {
        answers[radio.name] = radio.value;
      });
      
      // Calculate score
      let score = 0;
      Object.keys(answers).forEach(q => {
        if(correctAnswers[q] && answers[q] === correctAnswers[q]) {
          score++;
        }
      });
      
      // Total number of questions
      const totalQuestions = questions.length;
      const percentage = (score/totalQuestions * 100).toFixed(2);
      
      // Save to Firebase
      await db.collection("exam_results").add({
        name: name,
        phone: phone,
        level: level,
        score: score,
        total: totalQuestions,
        percentage: percentage,
        time: new Date().toLocaleString(),
        answers: answers
      });
      
      // Store result for PDF generation
      examResult = {
        name: name,
        level: level,
        score: score,
        total: totalQuestions,
        percentage: percentage,
        date: new Date().toLocaleString()
      };
      
      // Show result
      document.getElementById("resultBox").classList.remove("hidden");
      document.getElementById("resultBox").innerHTML = `
        <h3>Exam Submitted Successfully</h3>
        <p><strong>Name:</strong> ${name}</p>
        <p><strong>Class:</strong> ${level}</p>
        <p><strong>Score:</strong> ${score} / ${totalQuestions}</p>
        <p><strong>Percentage:</strong> ${percentage}%</p>
        <p><strong>Submitted:</strong> ${new Date().toLocaleString()}</p>
      `;
      
      // Show PDF download button
      document.getElementById("pdf-download").classList.remove("hidden");
      
      // Clean up
      clearInterval(timerInterval);
      clearInterval(noiseMonitorInterval);
      if (audioContext) {
        audioContext.close();
      }
      
    } catch (error) {
      console.error("Error submitting exam: ", error);
      alert("There was an error submitting your exam. Please try again.");
      submitBtn.disabled = false;
      submitBtn.textContent = "Submit Exam";
    }
  });

  // Generate PDF with logo and results
  function generatePDF() {
    const doc = new jsPDF();
    
    // Add logo (replace with your actual logo)
    const logoUrl = 'SCHOOL.jpg';
    
    // Add content to PDF
    doc.setFontSize(20);
    doc.setTextColor(40);
    doc.text('Daughters of Divine Love Juniorate', 105, 20, { align: 'center' });
    doc.setFontSize(16);
    doc.text('Entrance Examination Result', 105, 30, { align: 'center' });
    
    // Add student info
    doc.setFontSize(12);
    doc.text(`Name: ${examResult.name}`, 20, 50);
    doc.text(`Class: ${examResult.level}`, 20, 60);
    doc.text(`Date: ${examResult.date}`, 20, 70);
    
    // Add score summary
    doc.setFontSize(14);
    doc.setTextColor(0, 100, 0);
    doc.text('Exam Results Summary', 20, 90);
    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0);
    doc.text(`Score: ${examResult.score} out of ${examResult.total}`, 20, 100);
    doc.text(`Percentage: ${examResult.percentage}%`, 20, 110);
    
    // Add grading
    doc.setFontSize(14);
    doc.setTextColor(0, 100, 0);
    doc.text('Grading', 20, 130);
    doc.setFontSize(12);
    doc.setTextColor(0, 0, 0);
    doc.text('A: 80% - 100%', 20, 140);
    doc.text('B: 70% - 79%', 20, 150);
    doc.text('C: 60% - 69%', 20, 160);
    doc.text('D: 50% - 59%', 20, 170);
    doc.text('F: Below 50%', 20, 180);
    
    // Add footer
    doc.setFontSize(10);
    doc.setTextColor(100);
    doc.text('© 2023 Daughters of Divine Love Juniorate. All rights reserved.', 105, 280, { align: 'center' });
    
    // Save the PDF
    doc.save(`DDL_Exam_Result_${examResult.name.replace(' ', '_')}.pdf`);
  }

  // Update progress when answers change
  document.addEventListener('change', function(e) {
    if (e.target && e.target.matches('input[type="radio"]')) {
      updateProgress();
    }
  });
</script>
</body>
</html>